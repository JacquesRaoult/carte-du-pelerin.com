<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carte du P√®lerin</title>
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <style>

    </style>
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>üó∫Ô∏è Carte du P√®lerin</h1>
                <p>D√©couvrez les points d'int√©r√™t autour de vous</p>
            </div>

            <div class="search-box">
                <input type="text" class="search-input" id="searchInput" placeholder="üîç Rechercher un lieu...">
            </div>

            <div class="filters">
                <h3>Cat√©gories</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-category="all">Tous</button>
                    <button class="filter-btn" data-category="restaurant">Reliques</button>
                    <button class="filter-btn" data-category="hotel">Site remarquable</button>
                    <button class="filter-btn" data-category="monument">Mus√©e</button>
                </div>
            </div>

            <div class="poi-list" id="poiList"></div>
        </div>

        <!-- Map -->
        <div class="map-container">
            <button class="menu-toggle" id="menuToggle">‚ò∞</button>
            <div class="stats-bar">
                <span id="poiCount">0</span> points d'int√©r√™t affich√©s
            </div>
            <iframe id="map" 
                    src="https://umap.openstreetmap.fr/fr/map/carte-du-pelerin_665672?scaleControl=false&miniMap=false&scrollWheelZoom=true&zoomControl=true&allowEdit=false&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=undefined&captionBar=false"
                    allowfullscreen>
            </iframe>
        </div>
    </div>

    <script>
        const pois = [];

        // Variables
        let currentCategory = 'all';
        let searchTerm = '';

        // Mettre √† jour la liste POI
        function updatePoiList() {
            const filteredPois = pois.filter(poi => {
                const matchCategory = currentCategory === 'all' || poi.category === currentCategory;
                const matchSearch = poi.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    poi.description.toLowerCase().includes(searchTerm.toLowerCase());
                return matchCategory && matchSearch;
            });

            const poiList = document.getElementById('poiList');
            poiList.innerHTML = filteredPois.map(poi => `
                <div class="poi-item" data-id="${poi.id}">
                    <h4>${poi.name}</h4>
                    <span class="poi-category category-${poi.category}">${poi.category}</span>
                    <p>${poi.description}</p>
                </div>
            `).join('');

            updateStats(filteredPois.length);
        }

        // Mettre √† jour les stats
        function updateStats(count) {
            document.getElementById('poiCount').textContent = count;
        }

        // Filtres de cat√©gorie
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
                updatePoiList();
            });
        });

        // Recherche
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchTerm = e.target.value;
            updatePoiList();
        });

        // Toggle menu mobile
        document.getElementById('menuToggle').addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('active');
        });

        // Initialisation
        updatePoiList();
    </script>
</body>

</html>